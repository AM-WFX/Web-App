<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Selectors Validator - The Full Challenge</title>
    <link rel="stylesheet" href="styles.css"> 
    <style>
        .challenge-section {
            padding: 30px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px; /* Space between challenge boxes */
        }
        .target-box {
            padding: 20px;
            margin-bottom: 20px;
            border: 2px dashed #007bff;
            background-color: #e6f3ff;
            text-align: center;
        }
        .target-element {
            /* Highlight the element the user needs to target */
            background-color: #ffda79; 
            border: 1px solid #ffaa00;
            padding: 5px;
            display: inline-block;
        }
        #selector-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-family: monospace;
        }
        #validation-message {
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            min-height: 20px;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>

    <header class="navbar">
        <div class="logo">My Site</div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="css-selectors.html" class="active">Selectors</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <aside class="sidebar">...</aside>
        
        <main class="content">
            <h1>CSS Selector Validator - The Ultimate Challenge</h1>
            <p>Write a CSS selector below that targets **only the element highlighted in yellow** within the current challenge box. Click 'Next Challenge' to load a new selector puzzle.</p>
            
            <div class="validator-interface">
                <label for="selector-input">Enter your CSS Selector:</label>
                <input type="text" id="selector-input" placeholder="e.g., #id-name > .class-name">
                <button onclick="validateSelector()">Validate Selector</button>
                <button onclick="loadNextChallenge()">Next Challenge &raquo;</button>

                <div id="validation-message"></div>
            </div>
            
            <hr>
            
            <div id="challenge-area">
                </div>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 My Awesome Website</p>
    </footer>

    <script>
        const challenges = [
            // --- SIMPLE SELECTORS ---
            {
                prompt: "Target the **input field** using its **ID** attribute.",
                targetSelector: "#simple-input-target",
                html: `
                    <div class="challenge-section" data-challenge-id="1">
                        <h3>Challenge 1: Simple ID Selector</h3>
                        <div class="target-box">
                            <p>This is a container.</p>
                            <input type="text" placeholder="Not the target" class="input-field">
                            <input type="text" placeholder="TARGET" id="simple-input-target" class="target-element">
                            <button class="input-field">Click</button>
                        </div>
                    </div>
                `
            },
            {
                prompt: "Target the **list item** using its **class** attribute.",
                targetSelector: "li.special-item",
                html: `
                    <div class="challenge-section" data-challenge-id="2">
                        <h3>Challenge 2: Class Selector</h3>
                        <div class="target-box">
                            <ul>
                                <li>Item 1</li>
                                <li class="regular-item">Item 2</li>
                                <li class="special-item target-element">TARGET</li>
                                <li>Item 4</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            // --- COMBINATOR SELECTORS ---
            {
                prompt: "Target the **button** that is a **direct child** of the `.parent-div`.",
                targetSelector: ".parent-div > button",
                html: `
                    <div class="challenge-section" data-challenge-id="3">
                        <h3>Challenge 3: Child Combinator (>)</h3>
                        <div class="parent-div target-box">
                            <span>
                                <button>Not Target</button>
                            </span>
                            <button class="target-element">TARGET</button>
                        </div>
                    </div>
                `
            },
            {
                prompt: "Target the **paragraph** that is a **descendant** of the element with the ID `#container-descendant`.",
                targetSelector: "#container-descendant p",
                html: `
                    <div class="challenge-section" data-challenge-id="4">
                        <h3>Challenge 4: Descendant Combinator (space)</h3>
                        <div id="container-descendant" class="target-box">
                            <div>
                                <p class="target-element">TARGET Paragraph</p>
                            </div>
                            <p>Another paragraph (but also a descendant)</p>
                        </div>
                    </div>
                `
            },
            {
                prompt: "Target the **last input field** immediately preceded by the **label** using the **Adjacent Sibling Combinator** (+).",
                targetSelector: "label + input",
                html: `
                    <div class="challenge-section" data-challenge-id="5">
                        <h3>Challenge 5: Adjacent Sibling (+)</h3>
                        <div class="target-box">
                            <input type="text" value="Before Label">
                            <label>The Label</label>
                            <input type="text" value="TARGET" class="target-element">
                            <input type="text" value="Next Sibling">
                        </div>
                    </div>
                `
            },
            {
                prompt: "Target the **last paragraph** using the **General Sibling Combinator** (~).",
                targetSelector: "h4 ~ p:last-of-type",
                html: `
                    <div class="challenge-section" data-challenge-id="6">
                        <h3>Challenge 6: General Sibling (~)</h3>
                        <div class="target-box">
                            <p>First paragraph.</p>
                            <h4>A Heading</h4>
                            <p>Second paragraph.</p>
                            <p class="target-element">TARGET Last Sibling</p>
                        </div>
                    </div>
                `
            },
            // --- ATTRIBUTE SELECTORS ---
            {
                prompt: "Target the **link** whose `href` attribute **ends with** `.pdf`.",
                targetSelector: "a[href$='.pdf']",
                html: `
                    <div class="challenge-section" data-challenge-id="7">
                        <h3>Challenge 7: Attribute Ends With ($=)</h3>
                        <div class="target-box">
                            <a href="/doc/report.html">Report</a>
                            <a href="/files/doc.pdf" class="target-element">TARGET PDF</a>
                            <a href="/data/index.php">Data</a>
                        </div>
                    </div>
                `
            },
            {
                prompt: "Target the **div** that has **both** a `data-role='card'` **AND** a `data-status='active'` attribute.",
                targetSelector: "div[data-role='card'][data-status='active']",
                html: `
                    <div class="challenge-section" data-challenge-id="8">
                        <h3>Challenge 8: Multiple Attributes</h3>
                        <div class="target-box">
                            <div data-role="card" data-status="inactive">Inactive Card</div>
                            <div data-role="card" data-status="active" class="target-element">TARGET Active Card</div>
                            <div data-role="section" data-status="active">Active Section</div>
                        </div>
                    </div>
                `
            },
            // --- PSEUDO-CLASSES ---
            {
                prompt: "Target the **third list item** in the unordered list using **:nth-child**.",
                targetSelector: "ul li:nth-child(3)",
                html: `
                    <div class="challenge-section" data-challenge-id="9">
                        <h3>Challenge 9: Structural Pseudo-class (:nth-child)</h3>
                        <div class="target-box">
                            <ul>
                                <li>Item 1</li>
                                <li>Item 2</li>
                                <li class="target-element">TARGET Item 3</li>
                                <li>Item 4</li>
                            </ul>
                            <ol>
                                <li>Another List Item</li>
                            </ol>
                        </div>
                    </div>
                `
            },
            {
                prompt: "Target the **div** that **does not** have the class `.do-not-target` using **:not()**.",
                targetSelector: "div:not(.do-not-target)",
                html: `
                    <div class="challenge-section" data-challenge-id="10">
                        <h3>Challenge 10: Negation Pseudo-class (:not)</h3>
                        <div class="target-box">
                            <div class="do-not-target">Not Target Div</div>
                            <div class="target-element">TARGET Div</div>
                        </div>
                    </div>
                `
            },
            // --- COMPLEX/ADVANCED SELECTORS ---
            {
                prompt: "Target the **p element** that **contains a span descendant** using the **:has()** relational pseudo-class.",
                targetSelector: "p:has(span)",
                html: `
                    <div class="challenge-section" data-challenge-id="11">
                        <h3>Challenge 11: Relational Pseudo-class (:has)</h3>
                        <div class="target-box">
                            <p class="target-element">TARGET Parent <span>(I have a span)</span></p>
                            <p>Plain Paragraph</p>
                            <div><span>Not a P tag</span></div>
                        </div>
                    </div>
                `
            },
            {
                prompt: "Target the **input field** that is **disabled** using **:disabled**.",
                targetSelector: "input:disabled",
                html: `
                    <div class="challenge-section" data-challenge-id="12">
                        <h3>Challenge 12: UI State Pseudo-class (:disabled)</h3>
                        <div class="target-box">
                            <input type="text" placeholder="Enabled">
                            <input type="text" placeholder="Disabled TARGET" disabled class="target-element">
                            <button>Button</button>
                        </div>
                    </div>
                `
            }
        ];

        let currentChallengeIndex = 0;

        /**
         * Loads the current challenge into the challenge area.
         */
        function loadCurrentChallenge() {
            const challenge = challenges[currentChallengeIndex];
            document.getElementById('challenge-area').innerHTML = challenge.html;
            document.getElementById('validation-message').textContent = `Challenge ${currentChallengeIndex + 1}: ${challenge.prompt}`;
            document.getElementById('validation-message').className = ''; // Reset message style
            document.getElementById('selector-input').value = ''; // Clear input field
        }

        /**
         * Moves to the next challenge in the array.
         */
        function loadNextChallenge() {
            currentChallengeIndex = (currentChallengeIndex + 1) % challenges.length;
            loadCurrentChallenge();
        }

        /**
         * Core validation logic using document.querySelectorAll.
         */
        function validateSelector() {
            const userInput = document.getElementById('selector-input').value.trim();
            const messageElement = document.getElementById('validation-message');
            const challenge = challenges[currentChallengeIndex];
            const CORRECT_SELECTOR = challenge.targetSelector;

            messageElement.className = '';
            messageElement.textContent = '';

            if (userInput === '') {
                messageElement.textContent = 'Please enter a selector.';
                messageElement.classList.add('error');
                return;
            }

            try {
                // 1. Get the single, true target element from the DOM using the known correct selector
                const correctTarget = document.querySelector(CORRECT_SELECTOR);

                // 2. Get the elements selected by the user's input
                const selectedElements = document.querySelectorAll(userInput);

                if (!correctTarget) {
                    messageElement.textContent = 'Internal Error: Target element missing.';
                    messageElement.classList.add('error');
                    return;
                }

                if (selectedElements.length === 0) {
                    messageElement.textContent = `‚ùå Incorrect. The selector "${userInput}" selected no elements.`;
                    messageElement.classList.add('error');
                    return;
                }

                // 3. Check if the user's selection contains the *correct* target element.
                // NOTE: This allows selectors that also target other elements, but that's a valid selector.
                // A stricter validator would require selectedElements.length === 1 && selectedElements[0] === correctTarget
                // For learning, we'll allow selection of the target plus others, but ideally, they should be exact.
                const targetsMatch = Array.from(selectedElements).includes(correctTarget);

                if (targetsMatch) {
                    messageElement.textContent = `üéâ Correct! The selector "${userInput}" successfully targets the highlighted element.`;
                    messageElement.classList.add('success');
                } else {
                    messageElement.textContent = `‚ùå Incorrect. Your selector targets ${selectedElements.length} element(s), but not the highlighted one.`;
                    messageElement.classList.add('error');
                }

            } catch (e) {
                // Catch any invalid CSS selector syntax errors
                messageElement.textContent = `üö´ Syntax Error: "${userInput}" is not a valid CSS selector.`;
                messageElement.classList.add('error');
            }
        }

        // Initialize the first challenge when the page loads
        document.addEventListener('DOMContentLoaded', loadCurrentChallenge);
    </script>

</body>
</html>
